import{I as f}from"./default-BuSUeIOv.js";import{_ as v,ax as c}from"../index-CTXhHEjE.js";import{p as l,u as d,f as h}from"./context-DTbR1Zcq.js";import{o as g,c as b,k as x,q as k,s as $,e,a7 as t}from"../modules/vue-2fpiEc3Z.js";import"../modules/shiki-CJnnXe8e.js";const j={__name:"21",setup(p,{expose:o}){o(),l(c);const{$slidev:s,$nav:r,$clicksContext:n,$clicks:a,$page:u,$renderContext:_,$frontmatter:m}=d(),i={$slidev:s,$nav:r,$clicksContext:n,$clicks:a,$page:u,$renderContext:_,$frontmatter:m,InjectedLayout:f,get frontmatter(){return c},get useSlideContext(){return d},get _provideFrontmatter(){return l},get _frontmatterToProps(){return h}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},y=e("h1",null,"A recent performance regression",-1),I=e("p",null,"Fix",-1),w=e("p",null,[t("It is partially fixed in "),e("a",{href:"https://chromium-review.googlesource.com/c/v8/v8/+/5430889",target:"_blank"},[e("code",null,"[riscv] Skip check sv57 when enable pointer compress")]),t(" as the "),e("code",null,"cpu"),t(" variable becomes an unused variable.")],-1),P=e("p",null,[t("I opened "),e("a",{href:"https://chromium-review.googlesource.com/c/v8/v8/+/5612950",target:"_blank"},[e("code",null,"[riscv] avoid cpu probing in li_ptr")]),t(" to remove the "),e("code",null,"cpu"),t(" variable declaration in "),e("code",null,"Assembler::li_ptr"),t(" to completely fix it.")],-1),C=e("p",null,[t("For electrons, this performance regression is fixed in "),e("strong",null,"v29.4.0.riscv2, v29.4.2.riscv2, v30.1.0.riscv2, v27.3.11.riscv2, v26.6.10.riscv2, v28.3.3.riscv2 and all later releases"),t(".")],-1),S=e("p",null,[t("This performance regression also affects Node.js "),e("strong",null,"21 and 22 and the main branch"),t(".")],-1),T=e("p",null,[t("It is fixed in main branch by "),e("a",{href:"https://github.com/nodejs/node/pull/53412",target:"_blank"},"nodejs/node#53412"),t(". It will be backported to 22.x.")],-1),B=e("p",null,"But Node.js 21 wonâ€™t get the fix because it is already EOL.",-1);function F(p,o,s,r,n,a){return g(),b(r.InjectedLayout,k($(r._frontmatterToProps(r.frontmatter,20))),{default:x(()=>[y,I,w,P,C,S,T,B]),_:1},16)}const q=v(j,[["render",F],["__file","/@slidev/slides/21.md"]]);export{q as default};
