import{d as B,z as g,t as P,E as j,n as V,a8 as F,o as v,b as h,i as f,e as a,x as C,l as K,F as D,g as R,a9 as X,h as I,ae as O,af as U,p as G,a as J}from"../modules/vue-2fpiEc3Z.js";import{C as L,_ as z,q as Q,r as W}from"../index-CTXhHEjE.js";import{n as Y}from"../modules/unplugin-icons-CvLVkzgj.js";const b="slidev-note-fade",_="slidev-note-click-mark",Z=B({__name:"NoteDisplay",props:{class:{type:[String,Array],required:!1},noteHtml:{type:String,required:!1},note:{type:String,required:!1},highlight:{type:Boolean,required:!1,default:!0},placeholder:{type:String,required:!1},clicksContext:{type:null,required:!1},autoScroll:{type:Boolean,required:!1}},emits:["markerDblclick","markerClick"],setup(u,{expose:d,emit:n}){d();const e=u,m=n,k=g(()=>{var c;return e.clicksContext!=null&&((c=e.noteHtml)==null?void 0:c.includes("slidev-note-click-mark"))}),l=P(null);function o(){var N;if(!l.value||!k.value)return;const c=Array.from(l.value.querySelectorAll(`.${_}`)),i=+(((N=e.clicksContext)==null?void 0:N.current)??L),x=i<0||i>=L||!e.highlight,q=new Set;function M(t){!t||t===l.value||(q.add(t),t.parentElement&&M(t.parentElement))}const A=new Map;for(const t of c){const s=t.parentElement,r=Number(t.dataset.clicks);A.set(r,t),M(s),Array.from(s.childNodes).forEach(w=>{if(w.nodeType===3){const E=document.createElement("span");E.textContent=w.textContent,s.insertBefore(E,w),w.remove()}})}const T=Array.from(l.value.querySelectorAll("*"));let y=0;const S=new Map;for(const t of T)S.has(y)||S.set(y,[]),S.get(y).push(t),t.classList.contains(_)&&(y=Number(t.dataset.clicks)||y+1);for(const[t,s]of S)x?s.forEach(r=>r.classList.remove(b)):s.forEach(r=>r.classList.toggle(b,q.has(r)?!1:t!==i));for(const[t,s]of A)s.classList.remove(b),s.classList.toggle(`${_}-past`,x?!1:t<i),s.classList.toggle(`${_}-active`,x?!1:t===i),s.classList.toggle(`${_}-next`,x?!1:t===i+1),s.classList.toggle(`${_}-future`,x?!1:t>i+1),s.ondblclick=r=>{m("markerDblclick",r,t),!r.defaultPrevented&&(e.clicksContext.current=t,r.stopPropagation(),r.stopImmediatePropagation())},s.onclick=r=>{m("markerClick",r,t)},e.autoScroll&&t===i&&s.scrollIntoView({block:"center",behavior:"smooth"})}j(()=>{var c;return[e.noteHtml,(c=e.clicksContext)==null?void 0:c.current,e.highlight]},()=>{V(()=>{o()})},{immediate:!0}),F(()=>{o()});const p={props:e,emit:m,withClicks:k,noteDisplay:l,CLASS_FADE:b,CLASS_MARKER:_,highlightNote:o};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),$=["innerHTML"],ee=["textContent"],te=["textContent"];function oe(u,d,n,e,m,k){return n.noteHtml?(v(),h("div",{key:0,ref:"noteDisplay",class:f(["prose overflow-auto outline-none slidev-note",[e.props.class,e.withClicks?"slidev-note-with-clicks":""]]),innerHTML:n.noteHtml},null,10,$)):n.note?(v(),h("div",{key:1,class:f(["prose overflow-auto outline-none slidev-note",e.props.class])},[a("p",{textContent:C(n.note)},null,8,ee)],2)):(v(),h("div",{key:2,class:f(["prose overflow-auto outline-none opacity-50 italic select-none slidev-note",e.props.class])},[a("p",{textContent:C(e.props.placeholder||"No notes.")},null,8,te)],2))}const ve=z(Z,[["render",oe],["__file","/home/runner/work/slides/slides/node_modules/.pnpm/@slidev+client@0.49.10_@nuxt+kit@3.12.1_rollup@4.18.0__@vue+compiler-sfc@3.4.27_postcss@8.4.3_w2juxrewqpm4fezfs7rmoawgsu/node_modules/@slidev/client/internals/NoteDisplay.vue"]]),ne=B({__name:"ClicksSlider",props:{clicksContext:{type:null,required:!0},readonly:{type:Boolean,required:!1},active:{type:Boolean,required:!1,default:!0}},setup(u,{expose:d}){d();const n=u,e=g(()=>n.clicksContext.total),m=g(()=>Q(0,n.clicksContext.clicksStart,e.value)),k=g(()=>e.value-m.value+1),l=g({get(){return n.clicksContext.current>e.value?-1:n.clicksContext.current},set(i){n.clicksContext.current=i}}),o=g(()=>W(m.value,e.value+1));function p(){n.readonly||(l.value<0||l.value>e.value)&&(l.value=0)}const c={props:n,total:e,start:m,length:k,current:l,clicksRange:o,onMousedown:p,get CLICKS_MAX(){return L}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),H=u=>(G("data-v-183353a0"),u=u(),J(),u),se=["title"],re={class:"flex gap-0.5 items-center min-w-16 font-mono mr1"},le=H(()=>a("div",{"flex-auto":""},null,-1)),ae={"text-primary":""},ce=H(()=>a("span",{op25:""},"/",-1)),ie={op50:""},ue={relative:"","flex-auto":"",h5:"","font-mono":"",flex:"~"},de=["min","max"];function me(u,d,n,e,m,k){const l=Y;return v(),h("div",{class:f(["flex gap-1 items-center select-none",e.length?"":"op50"]),title:`Clicks in this slide: ${e.length}`},[a("div",re,[K(l,{"text-sm":"",op50:""}),le,e.current>=0&&e.current!==e.CLICKS_MAX&&n.active?(v(),h(D,{key:0},[a("span",ae,C(e.current),1),ce],64)):R("v-if",!0),a("span",ie,C(e.total),1)]),a("div",ue,[(v(!0),h(D,null,X(e.clicksRange,o=>(v(),h("div",{key:o,border:"y main","of-hidden":"",relative:"",class:f([o===0?"rounded-l border-l":"",o===e.total?"rounded-r border-r":""]),style:I({width:e.length>0?`${1/e.length*100}%`:"100%"})},[a("div",{absolute:"","inset-0":"",class:f(o<=e.current?"bg-primary op15":"")},null,2),a("div",{class:f([+o==+e.current?"text-primary font-bold op100 border-primary":"op30 border-main",o===0?"rounded-l":"",o===e.total?"rounded-r":"border-r-2"]),"w-full":"","h-full":"","text-xs":"",flex:"","items-center":"","justify-center":"","z-1":""},C(o),3)],6))),128)),O(a("input",{"onUpdate:modelValue":d[0]||(d[0]=o=>e.current=o),class:f(["range",n.readonly?"pointer-events-none":""]),type:"range",min:e.start,max:e.total,step:1,absolute:"","inset-0":"","z-10":"",op0:"",style:I({"--thumb-width":`${1/(e.length+1)*100}%`}),onMousedown:e.onMousedown,onFocus:d[1]||(d[1]=o=>{var p;return(p=o.currentTarget)==null?void 0:p.blur()})},null,46,de),[[U,e.current]])])],10,se)}const he=z(ne,[["render",me],["__scopeId","data-v-183353a0"],["__file","/home/runner/work/slides/slides/node_modules/.pnpm/@slidev+client@0.49.10_@nuxt+kit@3.12.1_rollup@4.18.0__@vue+compiler-sfc@3.4.27_postcss@8.4.3_w2juxrewqpm4fezfs7rmoawgsu/node_modules/@slidev/client/internals/ClicksSlider.vue"]]);export{he as C,ve as N};
