import{d as x,ab as w,ac as H,t as d,ad as E,E as g,D as N,a1 as C,n as D,o as k,c as T,i as v,h as y,ae as M,af as j,b as z,j as S}from"../modules/vue-2fpiEc3Z.js";import{c as B}from"./DrawingPreview-CVsX9iRJ.js";import{N as O}from"./ClicksSlider-ChrIMsvs.js";import{_ as q}from"../index-CTXhHEjE.js";const I=x({__name:"NoteEditable",props:{no:{type:Number,required:!0},class:{default:""},editing:{default:!1},style:{default:()=>({})},placeholder:{default:"No notes for this slide"},clicksContext:{type:Object},highlight:{default:!0},autoHeight:{default:!1}},emits:["update:editing","markerDblclick","markerClick"],setup(m,{expose:l,emit:r}){l();const e=m,u=r,i=w(e,"editing",u,{passive:!0}),{info:s,update:o}=B(H(e,"no")),a=d("");let c;const{ignoreUpdates:f}=E(a,t=>{if(!i.value)return;const b=e.no;clearTimeout(c),c=setTimeout(()=>{o({note:t},b)},500)});g(()=>{var t;return(t=s.value)==null?void 0:t.note},(t="")=>{i.value||(clearTimeout(c),f(()=>{a.value=t}))},{immediate:!0,flush:"sync"});const n=d(),_=d();N(()=>{var t;i.value&&((t=n.value)==null||t.focus())}),C(n,()=>{i.value=!1});function h(){!e.autoHeight||!n.value||!i.value||n.value.scrollHeight>n.value.clientHeight&&(n.value.style.height=`${n.value.scrollHeight}px`)}g([a,i],()=>{D(()=>{h()})},{flush:"post",immediate:!0});const p={props:e,emit:u,editing:i,info:s,update:o,note:a,get timer(){return c},set timer(t){c=t},ignoreUpdates:f,inputEl:n,inputHeight:_,calculateEditorHeight:h,NoteDisplay:O};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),K=["placeholder"];function U(m,l,r,e,u,i){var s;return e.editing?M((k(),z("textarea",{key:1,ref:"inputEl","onUpdate:modelValue":l[2]||(l[2]=o=>e.note=o),class:v(["prose resize-none overflow-auto outline-none bg-transparent block border-primary border-2",e.props.class]),style:y([{"line-height":"1.75"},[e.props.style,e.inputHeight!=null?{height:`${e.inputHeight}px`}:{}]]),placeholder:r.placeholder,onKeydown:l[3]||(l[3]=S(o=>e.editing=!1,["esc"]))},null,46,K)),[[j,e.note]]):(k(),T(e.NoteDisplay,{key:0,class:v(["border-transparent border-2",[e.props.class,e.note?"":"opacity-25 italic select-none"]]),style:y(e.props.style),note:e.note||r.placeholder,"note-html":(s=e.info)==null?void 0:s.noteHTML,"clicks-context":r.clicksContext,"auto-scroll":!r.autoHeight,highlight:e.props.highlight,onMarkerClick:l[0]||(l[0]=(o,a)=>e.emit("markerClick",o,a)),onMarkerDblclick:l[1]||(l[1]=(o,a)=>e.emit("markerDblclick",o,a))},null,8,["class","style","note","note-html","clicks-context","auto-scroll","highlight"]))}const A=q(I,[["render",U],["__file","/home/runner/work/slides/slides/node_modules/.pnpm/@slidev+client@0.49.10_@nuxt+kit@3.12.1_rollup@4.18.0__@vue+compiler-sfc@3.4.27_postcss@8.4.3_w2juxrewqpm4fezfs7rmoawgsu/node_modules/@slidev/client/internals/NoteEditable.vue"]]);export{A as N};
